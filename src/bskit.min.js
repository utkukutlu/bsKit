/**
 * User: utku
 * Date: 14.06.2018
 * Time: 20:28
 * Web : http://www.utkukutlu.com
 */
$.fn.bsTable=function(t){this.id="",this.ajax="",this.columns="",this.lengthMenu="",this.bodyData="",this.trData=[],this.dataLength=20,this.theadCount=0,this.totalData=0,this.sortType=1,this.buttons="";var i=this;if(void 0!==t&&(void 0!==t.data&&(this.bodyData=t.data),void 0!==t.columns&&(this.columns=t.columns),void 0!==t.ajax&&(this.ajax=t.ajax),void 0!==t.lengthMenu&&(this.lengthMenu=t.lengthMenu),void 0!==t.dataLength&&(this.dataLength=t.dataLength),void 0!==t.buttons&&(this.buttons=t.buttons)),this.container=$("<div/>",{class:"bs-table-container"}),this.container.append(this.clone()),this.replaceWith(this.container),this.html(this.container.html()),this.table="",this.thead=$("<thead/>",{}),this.tbody=$("<tbody/>",{}),this.tr=$("<tr/>",{}),this.th=$("<th/>",{}),this.td=$("<td/>",{}),this.table=this.container.find("table"),this.table.find("tbody").length<=0?i.table.append(i.tbody):i.tbody=i.table.find("tbody"),this.searchBox=$("<input/>",{type:"text",class:"bs-table-searchbox",placeholder:"Arama"}),this.lengthSelect=$("<select/>",{class:"bs-table-length-select"}),""!==this.lengthMenu)for(var n=0;n<this.lengthMenu[0].length;n++){var e=this.lengthMenu[0][n]==i.dataLength,o=$("<option/>",{html:this.lengthMenu[1][n],value:this.lengthMenu[0][n],selected:e});this.lengthSelect.append(o)}function s(){var t=Math.round(i.totalData/i.dataLength),n=$("<ul/>",{class:"bs-table-pagination"});i.container.find(".bs-table-pagination").remove();for(var e=1;e<=t;e++){var o=$("<li/>",{class:"bs-table-pagination-li"}),s=$("<a/>",{class:"bs-table-pagination-a"+(1==e?" bs-table-pagination-a-active":""),text:e,href:"#",page:e});s.click(function(){i.container.find(".bs-table-pagination-a").removeClass("bs-table-pagination-a-active"),i.container.find(".bs-table-pagination-a-active").removeClass("bs-table-pagination-a-active"),$(this).addClass("bs-table-pagination-a-active");for(var t=$(this).attr("page"),n=0;n<i.totalData;n++)n>=t*i.dataLength-i.dataLength&&n<t*i.dataLength?i.container.find("tbody tr").eq(n).show():i.container.find("tbody tr").eq(n).hide()}),o.append(s),n.append(o)}i.container.find(".bs-clear-pagination").remove(),i.container.append(n),i.container.append("<div class='bs-clear bs-clear-pagination'></div>")}if(this.lengthSelect.change(function(t){i.dataLength=i.lengthSelect.val();for(var n=0;n<i.tbody.find("tr").length;n++)n>=i.lengthSelect.val()?i.tbody.find("tr").eq(n).hide():i.tbody.find("tr").eq(n).show(),-1==i.lengthSelect.val()&&i.tbody.find("tr").eq(n).show();s()}),this.searchBox.keyup(function(){var t=i.searchBox.val();if(""!==t.trim())i.container.find("tbody tr").filter(function(){$(this).html().toLowerCase().indexOf(t)>-1?i.container.find("tbody tr:visible").length<i.dataLength&&$(this).show():$(this).hide()});else{i.container.find("tbody tr").hide();for(var n=0;n<=i.dataLength;n++)i.container.find("tbody tr:nth-child("+n+")").show()}i.container.find("tbody tr").is(":visible")?i.tbody.find("div").remove():i.container.find("tbody div").length<=0&&i.tbody.append("<div>Veri BulunamadÄ±</div>")}),i.container.prepend(this.searchBox),i.searchBox.after("<div class='bs-clear'></div>"),i.container.append(this.lengthSelect),i.lengthSelect.before("<div class='bs-clear'></div>"),i.container.find("tbody").length<=0&&i.table.append(this.tbody),i.container.on("click","tbody td",function(){var t;$(this)[0],(t=$(this).parents("tr")).hasClass("selected")?(t.removeClass("selected"),i.container.find("tbody tr").removeClass("selected")):(i.container.find("tbody tr").removeClass("selected"),t.addClass("selected"))}),i.container.find("thead tr th").click(function(){if(void 0===i.columns[this.cellIndex].sortable||!1!==i.columns[this.cellIndex].sortable){i.sortType=-1*i.sortType,i.container.find(".bs-table-sor-type").remove(),$(this).append("<div class='bs-table-sor-type'>"+(1===i.sortType?"&#9652;":"&#9662;")+"</div>");for(var t=[],n=0;n<i.container.find("tbody tr").length;n++){""!==(e=i.container.find("tbody tr:nth-child("+n+") td:nth-child("+(this.cellIndex+1)+")").text())&&t.push(e)}t.sort(function(t,n){return!1===isNaN(t)&&!1===isNaN(n)?-1===i.sortType?parseFloat(n)-parseFloat(t):parseFloat(t)-parseFloat(n):-1===i.sortType?t<n:t>n});for(n=0;n<t.length;n++){var e=i.container.find("tbody tr td:nth-child("+(this.cellIndex+1)+"):contains('"+t[n]+"')").parents("tr");i.container.find("tbody tr td:nth-child("+(this.cellIndex+1)+"):contains('"+t[n]+"')").parents("tr").remove(),i.container.find("tbody").append(e)}}}),this.buttonsDiv=$("<div/>",{class:"bs-table-buttons"}),""!==this.buttons)for(let t=0;t<this.buttons.length;t++){let n=$("<button/>",{class:"bs-table-button "+this.buttons[t].className,text:this.buttons[t].text});n.click(function(){"function"==typeof i.buttons[t].action&&i.buttons[t].action()}),this.buttonsDiv.append(n)}return i.container.prepend(this.buttonsDiv),$.ajax({type:i.ajax.type,url:i.ajax.url,data:i.ajax.data,success:function(t){"string"==typeof t?void 0===(t=JSON.parse(t)).data&&(t.data=t):"object"==typeof t&&void 0===t.data&&(t.data=t),""===i.columns&&(i.columns=t.columns),i.totalData=t.data.length;for(let n=0;n<t.data.length;n++){let e=$("<tr/>",{});for(let o=0;o<i.columns.length;o++){let s=$("<td/>",{html:t.data[n][i.columns[o].data],column:i.columns[o].data,"data-value":t.data[n][i.columns[o].data]});e.append(s)}i.tbody.append(e),n>=i.dataLength&&e.hide()}i.container.find("thead").length>0&&i.container.find("thead tr th").css({}),t.data.length<=0?i.tbody.html("Tabloda Veri Yok"):s()},error:function(t){}}),this.getSelectedRow=function(){var t={},n=i.container.find("tbody tr.selected");return n.length>0?(n.find("td").each(function(i){var n=$(this);t[n.attr("column")]=n.attr("data-value")}),t):null},this.getRow=function(t){var n={},e=i.container.find("tbody tr").eq(t);return e.length>0?(e.find("td").each(function(t){var i=$(this);n[i.attr("column")]=i.attr("data-value")}),n):null},this.getRows=function(){var t=[],n=i.container.find("tbody tr");return n.length>0?(n.each(function(i){var n=$(this),e={};n.find("td").each(function(t){var i=$(this);e[i.attr("column")]=i.attr("data-value")}),t.push(e)}),t):null},this},$.bsAlert=function(t,i){this.title="",this.content="",this.type="success",this.showConfirmButton=!1,this.confirmButtonText="",this.confirmButtonBackground="blue",this.confirmButtonTextColor="white",this.closable=!0,this.disableClose=!1,this.buttons="";var n=this;return void 0!==t&&(void 0!==t.type&&(n.type=t.type),void 0!==t.title&&(n.title=t.title),void 0!==t.content&&(n.content=t.content),void 0!==t.showConfirmButton&&(n.showConfirmButton=t.showConfirmButton),void 0!==t.confirmButtonText&&(n.confirmButtonText=t.confirmButtonText),void 0!==t.confirmButtonBackground&&(n.confirmButtonBackground=t.confirmButtonBackground),void 0!==t.confirmButtonTextColor&&(n.confirmButtonTextColor=t.confirmButtonTextColor),void 0!==t.closable&&(n.closable=t.closable),void 0!==t.disableClose&&(n.disableClose=t.disableClose),void 0!==t.buttons&&(n.buttons=t.buttons)),this.container=$("<div/>",{class:"bs-alert-container"}),this.body=$("<div/>",{class:"bs-alert-body"}),!0===n.closable&&n.container.click(function(){n.close()}),this.iconContainer=$("<div/>",{class:"bs-alert-icon-container"}),this.iconContent=$("<div/>",{class:"bs-alert-icon-content",html:"success"===n.type?"&#10004;":"danger"===n.type?"&#x274C;":""}),this.iconContainer.append(this.iconContent),this.titleContainer=$("<div/>",{class:"bs-alert-title-container"}),this.titleContent=$("<div/>",{class:"bs-alert-title-content",html:n.title}),this.titleContainer.append(this.titleContent),this.contentContainer=$("<div/>",{class:"bs-alert-content-container"}),this.contentContent=$("<div/>",{class:"bs-alert-content-content",html:n.content}),this.contentContainer.append(this.contentContent),this.buttonsContainer=$("<div/>",{class:"bs-alert-buttons-container"}),"object"==typeof n.buttons&&n.buttons.forEach(function(t){var e=$("<button/>",{class:"bs-alert-button",type:"button",html:t.text,style:"background:"+t.background+";color:"+t.color,"btn-val":t.value});void 0!==t.show&&!0===t.show||n.buttonsContainer.append(e),e.click(function(){"function"==typeof i&&(i($(this).attr("btn-val")),!0!==n.disableClose&&n.close())})}),this.body.append(this.iconContainer),this.body.append(this.titleContainer),this.body.append(this.contentContainer),this.body.append(this.buttonsContainer),this.container.append(this.body),$("body").append(n.container),this.close=function(){n.body.css("animation-name","zoomOut"),setTimeout(function(){n.container.remove()},300)},this.updateTitle=function(t){n.container.find(".bs-alert-title-content").html(t)},this.updateContent=function(t){n.container.find(".bs-alert-content-content").html(t)},this},$.bsNotification=function(t,i){this.type="success",this.content="",this.showSingle=!1,this.duration=2e3;var n=this;void 0!==t&&(void 0!==t.type&&(this.type=t.type),void 0!==t.content&&(this.content=t.content),void 0!==t.showSingle&&(this.showSingle=t.showSingle),void 0!==t.duration&&(this.duration=t.duration)),!0===n.showSingle&&$(".bs-notification").remove();let e=$(".bs-notification").length;function o(){e=$(".bs-notification").length;let t=$(".bs-notification").eq(0);$(".bs-notification").eq(0).css({top:0}),t.fadeOut(function(){t.remove();for(let t=0;t<e;t++)$(".bs-notification").eq(t).css({top:40*t});e>0&&o()})}return this.div=$("<div/>",{class:"bs-notification bs-notification-"+n.type,style:"top:"+40*e+"px;",text:n.content}),this.div.click(function(){"function"==typeof i&&i(),this.remove(),o()}),$("body").append(this.div),this.div.fadeIn("fast",function(){setTimeout(function(){o()},n.duration)}),this},$.bsWindow=function(t){this.id="bs-window",this.class="bs-window",this.title="bs Window",this.width="500px",this.height="500px",this.background="#dfe8f6",this.visible=!0,this.content="",this.resizable=!0,this.draggable=!0,this.xPosition="center",this.yPosition="center",this.src="",this.closeButtonContent="X",this.isFullScreen=!1;var i=this;if(this.show=function(){i.visible=!0,i.bsContainer.show()},this.hide=function(){i.visible=!1,i.bsContainer.hide()},void 0!==t&&(void 0!==t.resizable&&(this.resizable=t.resizable),void 0!==t.width&&(this.width=t.width),void 0!==t.height&&(this.height=t.height),void 0!==t.show&&(this.visible=t.show),void 0!==t.background&&(this.background=t.background),void 0!==t.title&&(this.title=t.title),void 0!==t.content&&(this.content=t.content),void 0!==t.draggable&&(this.draggable=t.draggable),void 0!==t.xPosition&&(this.xPosition=t.xPosition),void 0!==t.yPosition&&(this.yPosition=t.yPosition),void 0!==t.src&&(this.src=t.src),void 0!==t.closeButtonContent&&(this.closeButtonContent=t.closeButtonContent)),this.bsContainer=$("<div/>",{id:this.id,class:"bs-window-container",style:"width:"+this.width+";height:"+this.height+";background:"+this.background+";"}),this.bsWindowDiv=$("<div/>",{class:"bs-window"}),this.bsHeader=$("<div/>",{class:"bs-window-header"}),this.bsTitle=$("<div/>",{class:"bs-window-title",html:this.title}),this.bsBody=$("<div/>",{class:"bs-window-body",html:this.content}),this.bsFooter=$("<div/>",{class:"bs-window-footer"}),this.closeButton=$("<div/>",{class:"bs-window-close-btn",html:this.closeButtonContent}),this.iframe=$("<iframe/>",{class:"bs-window-iframe",src:this.src}),this.bsContainer.append(this.bsWindowDiv),this.bsContainer.append(this.bsWindowDiv),this.bsWindowDiv.append(this.bsHeader),this.bsHeader.append(this.closeButton),this.bsHeader.append(this.bsTitle),this.bsWindowDiv.append(this.bsBody),this.bsWindowDiv.append(this.bsFooter),this.bsBody.append(this.iframe),!0===this.draggable){var n=0,e=0,o=0,s=0,a=this.bsContainer;this.bsHeader.on("mousedown",function(t){t=t||window.event,o=t.clientX,s=t.clientY,$(document).on("mouseup",function(){a.css("opacity","1"),$(document).off("mouseup"),$(document).off("mousemove")}),$(document).on("mousemove",function(t){n=o-t.clientX,e=s-t.clientY,o=t.clientX,s=t.clientY,a.css("top",a.offset().top-e),a.css("left",a.offset().left-n),a.css("opacity","0.5")})}),this.bsFooter.on("mousedown",function(t){t=t||window.event,o=t.clientX,s=t.clientY,$(document).on("mouseup",function(){a.css("opacity","1"),$(document).off("mouseup"),$(document).off("mousemove")}),$(document).on("mousemove",function(t){n=o-t.clientX,e=s-t.clientY,o=t.clientX,s=t.clientY,a.css("top",a.offset().top-e),a.css("left",a.offset().left-n),a.css("opacity","0.5")})})}return this.bsHeader.dblclick(function(){!0===i.isFullScreen?i.restore():i.maximize()}),this.closeButton.click(function(){i.bsContainer.remove()}),this.maximize=function(){i.isFullScreen=!0,i.bsContainer.css({left:"0",right:"0",top:"0",bottom:"0",width:"calc(100% - 5px)",height:"calc(100% - 5px)"})},this.restore=function(){i.isFullScreen=!1,i.bsContainer.width(i.width),i.bsContainer.height(i.height),i.bsContainer.css({top:Math.max(0,($(window).height()-this.bsContainer.outerHeight())/2),left:Math.max(0,($(window).width()-this.bsContainer.outerHeight())/2)})},this.close=function(){this.bsContainer.remove()},!1===this.show&&$(i.bsContainer).hide(),"left"===this.xPosition?this.bsContainer.css({left:"0"}):"center"===this.xPosition?this.bsContainer.css({left:Math.max(0,($(window).width()-this.bsContainer.outerHeight())/2)}):"right"===this.xPosition&&this.bsContainer.css({right:"0"}),"top"===this.yPosition?this.bsContainer.css({top:"0"}):"center"===this.yPosition?this.bsContainer.css({top:Math.max(0,($(window).height()-this.bsContainer.outerHeight())/2)}):"bottom"===this.yPosition&&this.bsContainer.css({bottom:"0"}),$("body").append(this.bsContainer),this},$.fn.bsValidate=function(){let t=this,i=!0;return t.find(":input").each(function(){"text"===$(this).attr("type")?null!==$(this).val()&&""!==$(this).val()||void 0===$(this).attr("required")&&!1===$(this).attr("required")||(i=!1):"radio"===$(this).attr("type")?0===t.find("input[type='radio'][name='"+$(this).attr("name")+"']:checked").length&&(i=!1):"checkbox"===$(this).attr("type")&&(0===t.find("input[type='checkbox'][name='"+$(this).attr("name")+"']:checked").length&&(i=!1),console.dir($(this).attr("name")+" - "+$(this).is(":checked")))}),i};