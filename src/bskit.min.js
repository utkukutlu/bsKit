/**
 * User: utku
 * Date: 14.06.2018
 * Time: 20:28
 * Web : http://www.utkukutlu.com
 */
$.fn.bsTable=function(t){this.id="",this.ajax="",this.columns="",this.lengthMenu="",this.bodyData="",this.trData=[],this.dataLength=20,this.theadCount=0,this.totalData=0,this.sortType=1,this.buttons="";var e=this;if(void 0!==t&&(void 0!==t.data&&(this.bodyData=t.data),void 0!==t.columns&&(this.columns=t.columns),void 0!==t.ajax&&(this.ajax=t.ajax),void 0!==t.lengthMenu&&(this.lengthMenu=t.lengthMenu),void 0!==t.dataLength&&(this.dataLength=t.dataLength),void 0!==t.buttons&&(this.buttons=t.buttons)),this.container=$("<div/>",{class:"bs-table-container"}),this.container.append(this.clone()),this.replaceWith(this.container),this.html(this.container.html()),this.table="",this.thead=$("<thead/>",{}),this.tbody=$("<tbody/>",{}),this.tr=$("<tr/>",{}),this.th=$("<th/>",{}),this.td=$("<td/>",{}),this.table=this.container.find("table"),this.table.find("tbody").length<=0?e.table.append(e.tbody):e.tbody=e.table.find("tbody"),this.searchBox=$("<input/>",{type:"text",class:"bs-table-searchbox",placeholder:"Search"}),this.lengthSelect=$("<select/>",{class:"bs-table-length-select"}),""!==this.lengthMenu)for(var i=0;i<this.lengthMenu[0].length;i++){var n=this.lengthMenu[0][i]==e.dataLength,o=$("<option/>",{html:this.lengthMenu[1][i],value:this.lengthMenu[0][i],selected:n});this.lengthSelect.append(o)}function s(){var t=Math.round(e.totalData/e.dataLength),i=$("<ul/>",{class:"bs-table-pagination"});e.container.find(".bs-table-pagination").remove();for(var n=1;n<=t;n++){var o=$("<li/>",{class:"bs-table-pagination-li"}),s=$("<a/>",{class:"bs-table-pagination-a"+(1==n?" bs-table-pagination-a-active":""),text:n,href:"#",page:n});s.click(function(){e.container.find(".bs-table-pagination-a").removeClass("bs-table-pagination-a-active"),e.container.find(".bs-table-pagination-a-active").removeClass("bs-table-pagination-a-active"),$(this).addClass("bs-table-pagination-a-active");for(var t=$(this).attr("page"),i=0;i<e.totalData;i++)i>=t*e.dataLength-e.dataLength&&i<t*e.dataLength?e.container.find("tbody tr").eq(i).show():e.container.find("tbody tr").eq(i).hide()}),o.append(s),i.append(o)}e.container.find(".bs-clear-pagination").remove(),e.container.append(i),e.container.append("<div class='bs-clear bs-clear-pagination'></div>")}if(this.lengthSelect.change(function(t){e.dataLength=e.lengthSelect.val();for(var i=0;i<e.tbody.find("tr").length;i++)i>=e.lengthSelect.val()?e.tbody.find("tr").eq(i).hide():e.tbody.find("tr").eq(i).show(),-1==e.lengthSelect.val()&&e.tbody.find("tr").eq(i).show();s()}),this.searchBox.keyup(function(){var t=e.searchBox.val();if(""!==t.trim())e.container.find("tbody tr").filter(function(){$(this).html().toLowerCase().indexOf(t)>-1?e.container.find("tbody tr:visible").length<e.dataLength&&$(this).show():$(this).hide()});else{e.container.find("tbody tr").hide();for(var i=0;i<=e.dataLength;i++)e.container.find("tbody tr:nth-child("+i+")").show()}e.container.find("tbody tr").is(":visible")?e.tbody.find("div").remove():e.container.find("tbody div").length<=0&&e.tbody.append("<div>Veri BulunamadÄ±</div>")}),e.container.prepend(this.searchBox),e.searchBox.after("<div class='bs-clear'></div>"),e.container.append(this.lengthSelect),e.lengthSelect.before("<div class='bs-clear'></div>"),e.container.find("tbody").length<=0&&e.table.append(this.tbody),e.container.on("click","tbody td",function(){var t;$(this)[0],(t=$(this).parents("tr")).hasClass("selected")?(t.removeClass("selected"),e.container.find("tbody tr").removeClass("selected")):(e.container.find("tbody tr").removeClass("selected"),t.addClass("selected"))}),e.container.find("thead tr th").click(function(){if(void 0===e.columns[this.cellIndex].sortable||!1!==e.columns[this.cellIndex].sortable){e.sortType=-1*e.sortType,e.container.find(".bs-table-sor-type").remove(),$(this).append("<div class='bs-table-sor-type'>"+(1===e.sortType?"&#9652;":"&#9662;")+"</div>");for(var t=[],i=0;i<e.container.find("tbody tr").length;i++){""!==(n=e.container.find("tbody tr:nth-child("+i+") td:nth-child("+(this.cellIndex+1)+")").text())&&t.push(n)}t.sort(function(t,i){return!1===isNaN(t)&&!1===isNaN(i)?-1===e.sortType?parseFloat(i)-parseFloat(t):parseFloat(t)-parseFloat(i):-1===e.sortType?t<i:t>i});for(i=0;i<t.length;i++){var n=e.container.find("tbody tr td:nth-child("+(this.cellIndex+1)+"):contains('"+t[i]+"')").parents("tr");e.container.find("tbody tr td:nth-child("+(this.cellIndex+1)+"):contains('"+t[i]+"')").parents("tr").remove(),e.container.find("tbody").append(n)}}}),this.buttonsDiv=$("<div/>",{class:"bs-table-buttons"}),""!==this.buttons)for(let t=0;t<this.buttons.length;t++){let i=$("<button/>",{class:"bs-table-button "+this.buttons[t].className,text:this.buttons[t].text});i.click(function(){"function"==typeof e.buttons[t].action&&e.buttons[t].action()}),this.buttonsDiv.append(i)}return e.container.prepend(this.buttonsDiv),$.ajax({type:e.ajax.type,url:e.ajax.url,data:e.ajax.data,success:function(t){"string"==typeof t?void 0===(t=JSON.parse(t)).data&&(t.data=t):"object"==typeof t&&void 0===t.data&&(t.data=t),""===e.columns&&(e.columns=t.columns),e.totalData=t.data.length;for(let i=0;i<t.data.length;i++){let n=$("<tr/>",{});for(let o=0;o<e.columns.length;o++){let s=$("<td/>",{html:t.data[i][e.columns[o].data],column:e.columns[o].data,"data-value":t.data[i][e.columns[o].data]});n.append(s)}e.tbody.append(n),i>=e.dataLength&&n.hide()}e.container.find("thead").length>0&&e.container.find("thead tr th").css({}),t.data.length<=0?e.tbody.html("Tabloda Veri Yok"):s()},error:function(t){}}),this.getSelectedRow=function(){var t={},i=e.container.find("tbody tr.selected");return i.length>0?(i.find("td").each(function(e){var i=$(this);t[i.attr("column")]=i.attr("data-value")}),t):null},this.getRow=function(t){var i={},n=e.container.find("tbody tr").eq(t);return n.length>0?(n.find("td").each(function(t){var e=$(this);i[e.attr("column")]=e.attr("data-value")}),i):null},this.getRows=function(){var t=[],i=e.container.find("tbody tr");return i.length>0?(i.each(function(e){var i=$(this),n={};i.find("td").each(function(t){var e=$(this);n[e.attr("column")]=e.attr("data-value")}),t.push(n)}),t):null},this},$.bsAlert=function(t,e){this.title="",this.content="",this.type="success",this.showConfirmButton=!1,this.confirmButtonText="",this.confirmButtonBackground="blue",this.confirmButtonTextColor="white",this.closable=!0,this.disableClose=!1,this.buttons="";var i=this;return void 0!==t&&(void 0!==t.type&&(i.type=t.type),void 0!==t.title&&(i.title=t.title),void 0!==t.content&&(i.content=t.content),void 0!==t.showConfirmButton&&(i.showConfirmButton=t.showConfirmButton),void 0!==t.confirmButtonText&&(i.confirmButtonText=t.confirmButtonText),void 0!==t.confirmButtonBackground&&(i.confirmButtonBackground=t.confirmButtonBackground),void 0!==t.confirmButtonTextColor&&(i.confirmButtonTextColor=t.confirmButtonTextColor),void 0!==t.closable&&(i.closable=t.closable),void 0!==t.disableClose&&(i.disableClose=t.disableClose),void 0!==t.buttons&&(i.buttons=t.buttons)),this.container=$("<div/>",{class:"bs-alert-container"}),this.body=$("<div/>",{class:"bs-alert-body"}),!0===i.closable&&i.container.click(function(){i.close()}),this.iconContainer=$("<div/>",{class:"bs-alert-icon-container"}),this.iconContent=$("<div/>",{class:"bs-alert-icon-content",html:"success"===i.type?"&#10004;":"danger"===i.type?"&#x274C;":""}),this.iconContainer.append(this.iconContent),this.titleContainer=$("<div/>",{class:"bs-alert-title-container"}),this.titleContent=$("<div/>",{class:"bs-alert-title-content",html:i.title}),this.titleContainer.append(this.titleContent),this.contentContainer=$("<div/>",{class:"bs-alert-content-container"}),this.contentContent=$("<div/>",{class:"bs-alert-content-content",html:i.content}),this.contentContainer.append(this.contentContent),this.buttonsContainer=$("<div/>",{class:"bs-alert-buttons-container"}),"object"==typeof i.buttons&&i.buttons.forEach(function(t){var n=$("<button/>",{class:"bs-alert-button",type:"button",html:t.text,style:"background:"+t.background+";color:"+t.color,"btn-val":t.value});void 0!==t.show&&!0===t.show||i.buttonsContainer.append(n),n.click(function(){"function"==typeof e&&(e($(this).attr("btn-val")),!0!==i.disableClose&&i.close())})}),this.body.append(this.iconContainer),this.body.append(this.titleContainer),this.body.append(this.contentContainer),this.body.append(this.buttonsContainer),this.container.append(this.body),$("body").append(i.container),this.close=function(){i.body.css("animation-name","zoomOut"),setTimeout(function(){i.container.remove()},300)},this.updateTitle=function(t){i.container.find(".bs-alert-title-content").html(t)},this.updateContent=function(t){i.container.find(".bs-alert-content-content").html(t)},this},$.bsNotification=function(t,e){this.type="success",this.content="",this.showSingle=!1,this.duration=2e3;var i=this;void 0!==t&&(void 0!==t.type&&(this.type=t.type),void 0!==t.content&&(this.content=t.content),void 0!==t.showSingle&&(this.showSingle=t.showSingle),void 0!==t.duration&&(this.duration=t.duration)),!0===i.showSingle&&$(".bs-notification").remove();let n=$(".bs-notification").length;function o(){n=$(".bs-notification").length;let t=$(".bs-notification").eq(0);$(".bs-notification").eq(0).css({top:0}),t.fadeOut(function(){t.remove();for(let t=0;t<n;t++)$(".bs-notification").eq(t).css({top:40*t});n>0&&o()})}return this.div=$("<div/>",{class:"bs-notification bs-notification-"+i.type,style:"top:"+40*n+"px;",text:i.content}),this.div.click(function(){"function"==typeof e&&e(),this.remove(),o()}),$("body").append(this.div),this.div.fadeIn("fast",function(){setTimeout(function(){o()},i.duration)}),this},$.bsWindow=function(t){this.id="bs-window",this.class="bs-window",this.title="bs Window",this.width="500px",this.height="500px",this.background="#dfe8f6",this.visible=!0,this.content="",this.resizable=!0,this.draggable=!0,this.xPosition="center",this.yPosition="center",this.src="",this.closeButtonContent="X",this.isFullScreen=!1;var e=this;if(this.show=function(){e.visible=!0,e.bsContainer.show()},this.hide=function(){e.visible=!1,e.bsContainer.hide()},void 0!==t&&(void 0!==t.resizable&&(this.resizable=t.resizable),void 0!==t.width&&(this.width=t.width),void 0!==t.height&&(this.height=t.height),void 0!==t.show&&(this.visible=t.show),void 0!==t.background&&(this.background=t.background),void 0!==t.title&&(this.title=t.title),void 0!==t.content&&(this.content=t.content),void 0!==t.draggable&&(this.draggable=t.draggable),void 0!==t.xPosition&&(this.xPosition=t.xPosition),void 0!==t.yPosition&&(this.yPosition=t.yPosition),void 0!==t.src&&(this.src=t.src),void 0!==t.closeButtonContent&&(this.closeButtonContent=t.closeButtonContent)),this.bsContainer=$("<div/>",{id:this.id,class:"bs-window-container",style:"width:"+this.width+";height:"+this.height+";background:"+this.background+";"}),this.bsWindowDiv=$("<div/>",{class:"bs-window"}),this.bsHeader=$("<div/>",{class:"bs-window-header"}),this.bsTitle=$("<div/>",{class:"bs-window-title",html:this.title}),this.bsBody=$("<div/>",{class:"bs-window-body",html:this.content}),this.bsFooter=$("<div/>",{class:"bs-window-footer"}),this.closeButton=$("<div/>",{class:"bs-window-close-btn",html:this.closeButtonContent}),this.iframe=$("<iframe/>",{class:"bs-window-iframe",src:this.src}),this.bsContainer.append(this.bsWindowDiv),this.bsContainer.append(this.bsWindowDiv),this.bsWindowDiv.append(this.bsHeader),this.bsHeader.append(this.closeButton),this.bsHeader.append(this.bsTitle),this.bsWindowDiv.append(this.bsBody),this.bsWindowDiv.append(this.bsFooter),this.bsBody.append(this.iframe),!0===this.draggable){var i=0,n=0,o=0,s=0,a=this.bsContainer;this.bsHeader.on("mousedown",function(t){t=t||window.event,o=t.clientX,s=t.clientY,$(document).on("mouseup",function(){a.css("opacity","1"),$(document).off("mouseup"),$(document).off("mousemove")}),$(document).on("mousemove",function(t){i=o-t.clientX,n=s-t.clientY,o=t.clientX,s=t.clientY,a.css("top",a.offset().top-n),a.css("left",a.offset().left-i),a.css("opacity","0.5")})}),this.bsFooter.on("mousedown",function(t){t=t||window.event,o=t.clientX,s=t.clientY,$(document).on("mouseup",function(){a.css("opacity","1"),$(document).off("mouseup"),$(document).off("mousemove")}),$(document).on("mousemove",function(t){i=o-t.clientX,n=s-t.clientY,o=t.clientX,s=t.clientY,a.css("top",a.offset().top-n),a.css("left",a.offset().left-i),a.css("opacity","0.5")})})}return this.bsHeader.dblclick(function(){!0===e.isFullScreen?e.restore():e.maximize()}),this.closeButton.click(function(){e.bsContainer.remove()}),this.maximize=function(){e.isFullScreen=!0,e.bsContainer.css({left:"0",right:"0",top:"0",bottom:"0",width:"calc(100% - 5px)",height:"calc(100% - 5px)"})},this.restore=function(){e.isFullScreen=!1,e.bsContainer.width(e.width),e.bsContainer.height(e.height),e.bsContainer.css({top:Math.max(0,($(window).height()-this.bsContainer.outerHeight())/2),left:Math.max(0,($(window).width()-this.bsContainer.outerHeight())/2)})},this.close=function(){this.bsContainer.remove()},!1===this.show&&$(e.bsContainer).hide(),"left"===this.xPosition?this.bsContainer.css({left:"0"}):"center"===this.xPosition?this.bsContainer.css({left:Math.max(0,($(window).width()-this.bsContainer.outerHeight())/2)}):"right"===this.xPosition&&this.bsContainer.css({right:"0"}),"top"===this.yPosition?this.bsContainer.css({top:"0"}):"center"===this.yPosition?this.bsContainer.css({top:Math.max(0,($(window).height()-this.bsContainer.outerHeight())/2)}):"bottom"===this.yPosition&&this.bsContainer.css({bottom:"0"}),$("body").append(this.bsContainer),this},$.fn.bsValidate=function(){let t=this,e=!0;return t.find(":input").each(function(){"text"===$(this).attr("type")?null!==$(this).val()&&""!==$(this).val()||void 0===$(this).attr("required")&&!1===$(this).attr("required")||(e=!1):"radio"===$(this).attr("type")?0===t.find("input[type='radio'][name='"+$(this).attr("name")+"']:checked").length&&(e=!1):"checkbox"===$(this).attr("type")&&0===t.find("input[type='checkbox'][name='"+$(this).attr("name")+"']:checked").length&&(e=!1)}),e},$.fn.bsDatePicker=function(t){this.format="d-m-y";var e=this;void 0!==t&&void 0!==t.format&&(e.format=t.format);var i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=new Date,s=o.getDate(),a=o.getMonth()+1,r=o.getFullYear();o.getDay();function d(){l().find("table tbody").html("");for(var t=1;t<=31;t++){if(t%7==0||1===t)var i=$("<tr/>",{});var n=t,o=l().find(".bs-datepicker-top-center").attr("month"),a=l().find(".bs-datepicker-top-center").attr("year"),r=new Date(a+"-"+o+"-"+n),d=$("<td/>",{class:"bs-datepicker-middle-table-td "+(t===s?"bs-datepicker-current-day":""),html:t+"<br>"+h(r.getDay()),day:r.getDate(),month:o,year:a,dayOfWeek:h(r.getDay())});d.click(function(){e.tbody.find(".bs-datepicker-middle-table-td").removeClass("bs-datepicker-current-day"),$(this).addClass("bs-datepicker-current-day");var t=e.format.replace("d",$(this).attr("day")).replace("m",$(this).attr("month")).replace("y",$(this).attr("year"));e.val(t),setTimeout(function(){e.close()},50)}),i.append(d),l().find("table tbody").append(i)}}function c(t){return t<0&&(t=0),t>12&&(t=12),i[t]}function h(t){return t<0&&(t=0),t>7&&(t=7),n[t]}function l(){return e.next(".bs-datepicker-container")}return this.container=$("<div/>",{class:"bs-datepicker-container"}),this.body=$("<div/>",{class:"bs-datepicker-body"}),this.top=$("<div/>",{class:"bs-datepicker-top"}),this.middle=$("<div/>",{class:"bs-datepicker-middle"}),this.bottom=$("<div/>",{class:"bs-datepicker-bottom"}),this.topLeftArrow=$("<div/>",{class:"bs-datepicker-top-leftArrow",html:"<"}),this.topRightArrow=$("<div/>",{class:"bs-datepicker-top-rightArrow",html:">"}),this.topCenter=$("<div/>",{class:"bs-datepicker-top-center",html:c(a-1)+" "+r,month:a,year:r}),e.topLeftArrow.click(function(){var t=e.next(".bs-datepicker-container").find(".bs-datepicker-top-center"),i=parseInt(t.attr("month"))-1;i<1&&(i=12,t.attr("year",parseInt(t.attr("year"))-1)),t.attr("month",i),d(),t.html(c(t.attr("month")-1)+" "+t.attr("year"))}),e.topRightArrow.click(function(){var t=e.next(".bs-datepicker-container").find(".bs-datepicker-top-center"),i=parseInt(t.attr("month"))+1;i>12&&(i=1,t.attr("year",parseInt(t.attr("year"))+1)),t.attr("month",i),d(),t.html(c(t.attr("month")-1)+" "+t.attr("year"))}),this.table=$("<table/>",{class:"bs-datepicker-middle-table"}),this.thead=$("<thead/>",{}),this.tbody=$("<tbody/>",{}),e.table.append(e.thead),e.table.append(e.tbody),e.top.append(e.topLeftArrow),e.top.append(e.topCenter),e.top.append(e.topRightArrow),e.middle.append(e.table),e.body.append(e.top),e.body.append(e.middle),e.body.append(e.bottom),e.container.append(e.body),e.click(function(){0===l().length&&(e.bsDatePicker(t),e.after(e.container),d())}),e.focus(function(){0===l().length&&(e.bsDatePicker(t),e.after(e.container),d())}),e.blur(function(){l().length>0&&!l().is(":active")&&e.close()}),this.close=function(){l().remove()},this};