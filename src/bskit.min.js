/**
 * User: utku
 * Date: 14.06.2018
 * Time: 20:28
 * Web : http://www.utkukutlu.com
 */
$.fn.bsTable=function(t){this.id="",this.ajax="",this.columns="",this.lengthMenu="",this.bodyData="",this.trData=[],this.dataLength=20,this.theadCount=0,this.totalData=0,this.sortType=1,this.buttons="";var n=this;if(void 0!==t&&(void 0!==t.data&&(this.bodyData=t.data),void 0!==t.columns&&(this.columns=t.columns),void 0!==t.ajax&&(this.ajax=t.ajax),void 0!==t.lengthMenu&&(this.lengthMenu=t.lengthMenu),void 0!==t.dataLength&&(this.dataLength=t.dataLength),void 0!==t.buttons&&(this.buttons=t.buttons)),this.container=$("<div/>",{class:"bs-table-container"}),this.container.append(this.clone()),this.replaceWith(this.container),this.html(this.container.html()),this.table="",this.thead=$("<thead/>",{}),this.tbody=$("<tbody/>",{}),this.tr=$("<tr/>",{}),this.th=$("<th/>",{}),this.td=$("<td/>",{}),this.table=this.container.find("table"),this.table.find("tbody").length<=0?n.table.append(n.tbody):n.tbody=n.table.find("tbody"),this.searchBox=$("<input/>",{type:"text",class:"bs-table-searchbox",placeholder:"Arama"}),this.lengthSelect=$("<select/>",{class:"bs-table-length-select"}),""!==this.lengthMenu)for(var e=0;e<this.lengthMenu[0].length;e++){var i=this.lengthMenu[0][e]==n.dataLength,o=$("<option/>",{html:this.lengthMenu[1][e],value:this.lengthMenu[0][e],selected:i});this.lengthSelect.append(o)}function a(){var t=Math.round(n.totalData/n.dataLength),e=$("<ul/>",{class:"bs-table-pagination"});n.container.find(".bs-table-pagination").remove();for(var i=1;i<=t;i++){var o=$("<li/>",{class:"bs-table-pagination-li"}),a=$("<a/>",{class:"bs-table-pagination-a"+(1==i?" bs-table-pagination-a-active":""),text:i,href:"#",page:i});a.click(function(){n.container.find(".bs-table-pagination-a").removeClass("bs-table-pagination-a-active"),n.container.find(".bs-table-pagination-a-active").removeClass("bs-table-pagination-a-active"),$(this).addClass("bs-table-pagination-a-active");for(var t=$(this).attr("page"),e=0;e<n.totalData;e++)e>=t*n.dataLength-n.dataLength&&e<t*n.dataLength?n.container.find("tbody tr").eq(e).show():n.container.find("tbody tr").eq(e).hide()}),o.append(a),e.append(o)}n.container.find(".bs-clear-pagination").remove(),n.container.append(e),n.container.append("<div class='bs-clear bs-clear-pagination'></div>")}if(this.lengthSelect.change(function(t){n.dataLength=n.lengthSelect.val();for(var e=0;e<n.tbody.find("tr").length;e++)e>=n.lengthSelect.val()?n.tbody.find("tr").eq(e).hide():n.tbody.find("tr").eq(e).show(),-1==n.lengthSelect.val()&&n.tbody.find("tr").eq(e).show();a()}),this.searchBox.keyup(function(){var t=n.searchBox.val();if(""!==t.trim())n.container.find("tbody tr").filter(function(){$(this).html().toLowerCase().indexOf(t)>-1?n.container.find("tbody tr:visible").length<n.dataLength&&$(this).show():$(this).hide()});else{n.container.find("tbody tr").hide();for(var e=0;e<=n.dataLength;e++)n.container.find("tbody tr:nth-child("+e+")").show()}n.container.find("tbody tr").is(":visible")?n.tbody.find("div").remove():n.container.find("tbody div").length<=0&&n.tbody.append("<div>Veri BulunamadÄ±</div>")}),n.container.prepend(this.searchBox),n.searchBox.after("<div class='bs-clear'></div>"),n.container.append(this.lengthSelect),n.lengthSelect.before("<div class='bs-clear'></div>"),n.container.find("tbody").length<=0&&n.table.append(this.tbody),n.container.on("click","tbody td",function(){var t;$(this)[0],(t=$(this).parents("tr")).hasClass("selected")?(t.removeClass("selected"),n.container.find("tbody tr").removeClass("selected")):(n.container.find("tbody tr").removeClass("selected"),t.addClass("selected"))}),n.container.find("thead tr th").click(function(){if(void 0===n.columns[this.cellIndex].sortable||!1!==n.columns[this.cellIndex].sortable){n.sortType=-1*n.sortType,n.container.find(".bs-table-sor-type").remove(),$(this).append("<div class='bs-table-sor-type'>"+(1===n.sortType?"&#9652;":"&#9662;")+"</div>");for(var t=[],e=0;e<n.container.find("tbody tr").length;e++){""!==(i=n.container.find("tbody tr:nth-child("+e+") td:nth-child("+(this.cellIndex+1)+")").text())&&t.push(i)}t.sort(function(t,e){return!1===isNaN(t)&&!1===isNaN(e)?-1===n.sortType?parseFloat(e)-parseFloat(t):parseFloat(t)-parseFloat(e):-1===n.sortType?t<e:t>e});for(e=0;e<t.length;e++){var i=n.container.find("tbody tr td:nth-child("+(this.cellIndex+1)+"):contains('"+t[e]+"')").parents("tr");n.container.find("tbody tr td:nth-child("+(this.cellIndex+1)+"):contains('"+t[e]+"')").parents("tr").remove(),n.container.find("tbody").append(i)}}}),this.buttonsDiv=$("<div/>",{class:"bs-table-buttons"}),""!==this.buttons)for(let t=0;t<this.buttons.length;t++){let e=$("<button/>",{class:"bs-table-button "+this.buttons[t].className,text:this.buttons[t].text});e.click(function(){"function"==typeof n.buttons[t].action&&n.buttons[t].action()}),this.buttonsDiv.append(e)}return n.container.prepend(this.buttonsDiv),$.ajax({type:n.ajax.type,url:n.ajax.url,data:n.ajax.data,success:function(t){"string"==typeof t?void 0===(t=JSON.parse(t)).data&&(t.data=t):"object"==typeof t&&void 0===t.data&&(t.data=t),""===n.columns&&(n.columns=t.columns),n.totalData=t.data.length;for(let e=0;e<t.data.length;e++){let i=$("<tr/>",{});for(let o=0;o<n.columns.length;o++){let a=$("<td/>",{html:t.data[e][n.columns[o].data],column:n.columns[o].data,"data-value":t.data[e][n.columns[o].data]});i.append(a)}n.tbody.append(i),e>=n.dataLength&&i.hide()}n.container.find("thead").length>0&&n.container.find("thead tr th").css({}),t.data.length<=0?n.tbody.html("Tabloda Veri Yok"):a()},error:function(t){}}),this.getSelectedRow=function(){var t={},e=n.container.find("tbody tr.selected");return e.length>0?(e.find("td").each(function(n){var e=$(this);t[e.attr("column")]=e.attr("data-value")}),t):null},this.getRow=function(t){var e={},i=n.container.find("tbody tr").eq(t);return i.length>0?(i.find("td").each(function(t){var n=$(this);e[n.attr("column")]=n.attr("data-value")}),e):null},this.getRows=function(){var t=[],e=n.container.find("tbody tr");return e.length>0?(e.each(function(n){var e=$(this),i={};e.find("td").each(function(t){var n=$(this);i[n.attr("column")]=n.attr("data-value")}),t.push(i)}),t):null},this},$.bsAlert=function(t,n){this.title="",this.content="",this.type="success",this.showConfirmButton=!1,this.confirmButtonText="",this.confirmButtonBackground="blue",this.confirmButtonTextColor="white",this.closable=!0,this.disableClose=!1,this.buttons="";var e=this;return void 0!==t&&(void 0!==t.type&&(e.type=t.type),void 0!==t.title&&(e.title=t.title),void 0!==t.content&&(e.content=t.content),void 0!==t.showConfirmButton&&(e.showConfirmButton=t.showConfirmButton),void 0!==t.confirmButtonText&&(e.confirmButtonText=t.confirmButtonText),void 0!==t.confirmButtonBackground&&(e.confirmButtonBackground=t.confirmButtonBackground),void 0!==t.confirmButtonTextColor&&(e.confirmButtonTextColor=t.confirmButtonTextColor),void 0!==t.closable&&(e.closable=t.closable),void 0!==t.disableClose&&(e.disableClose=t.disableClose),void 0!==t.buttons&&(e.buttons=t.buttons)),this.container=$("<div/>",{class:"bs-alert-container"}),this.body=$("<div/>",{class:"bs-alert-body"}),!0===e.closable&&e.container.click(function(){e.close()}),this.iconContainer=$("<div/>",{class:"bs-alert-icon-container"}),this.iconContent=$("<div/>",{class:"bs-alert-icon-content",html:"success"===e.type?"&#10004;":"danger"===e.type?"&#x274C;":""}),this.iconContainer.append(this.iconContent),this.titleContainer=$("<div/>",{class:"bs-alert-title-container"}),this.titleContent=$("<div/>",{class:"bs-alert-title-content",html:e.title}),this.titleContainer.append(this.titleContent),this.contentContainer=$("<div/>",{class:"bs-alert-content-container"}),this.contentContent=$("<div/>",{class:"bs-alert-content-content",html:e.content}),this.contentContainer.append(this.contentContent),this.buttonsContainer=$("<div/>",{class:"bs-alert-buttons-container"}),"object"==typeof e.buttons&&e.buttons.forEach(function(t){var i=$("<button/>",{class:"bs-alert-button",type:"button",html:t.text,style:"background:"+t.background+";color:"+t.color,"btn-val":t.value});void 0!==t.show&&!0===t.show||e.buttonsContainer.append(i),i.click(function(){"function"==typeof n&&(n($(this).attr("btn-val")),!0!==e.disableClose&&e.close())})}),this.body.append(this.iconContainer),this.body.append(this.titleContainer),this.body.append(this.contentContainer),this.body.append(this.buttonsContainer),this.container.append(this.body),$("body").append(e.container),this.close=function(){e.body.css("animation-name","zoomOut"),setTimeout(function(){e.container.remove()},300)},this.updateTitle=function(t){e.container.find(".bs-alert-title-content").html(t)},this.updateContent=function(t){e.container.find(".bs-alert-content-content").html(t)},this},$.bsNotification=function(t,n){this.type="success",this.content="",this.showSingle=!1,this.duration=2e3;var e=this;void 0!==t&&(void 0!==t.type&&(this.type=t.type),void 0!==t.content&&(this.content=t.content),void 0!==t.showSingle&&(this.showSingle=t.showSingle),void 0!==t.duration&&(this.duration=t.duration)),!0===e.showSingle&&$(".bs-notification").remove();let i=$(".bs-notification").length;function o(){i=$(".bs-notification").length;let t=$(".bs-notification").eq(0);$(".bs-notification").eq(0).css({top:0}),t.fadeOut(function(){t.remove();for(let t=0;t<i;t++)$(".bs-notification").eq(t).css({top:40*t});i>0&&o()})}return this.div=$("<div/>",{class:"bs-notification bs-notification-"+e.type,style:"top:"+40*i+"px;",text:e.content}),this.div.click(function(){"function"==typeof n&&n(),this.remove(),o()}),$("body").append(this.div),this.div.fadeIn("fast",function(){setTimeout(function(){o()},e.duration)}),this};